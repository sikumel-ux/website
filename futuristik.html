<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mahika Agency | Street Route</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --street-yellow: #ffcc00;
            --street-red: #ff3e3e;
            --asphalt: #0f0f0f;
        }

        body {
            font-family: 'JetBrains Mono', monospace;
            background-color: var(--asphalt);
            background-image: 
                linear-gradient(rgba(255,255,255,0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255,255,255,0.05) 1px, transparent 1px);
            background-size: 50px 50px;
            color: white;
            min-height: 100vh;
        }

        #particles-js {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .street-title {
            font-family: 'Space Grotesk', sans-serif;
            font-weight: 800;
            text-transform: uppercase;
            font-size: 4rem;
            line-height: 0.8;
            color: var(--street-yellow);
            text-shadow: 4px 4px 0px var(--street-red);
        }

        /* CARD GAYA MARKA JALAN */
        .street-card {
            background: #1a1a1a;
            border-left: 8px solid var(--street-yellow);
            border-bottom: 2px solid #333;
            transition: all 0.2s ease;
        }

        .street-card:hover {
            background: #222;
            transform: skewX(-2deg);
            border-left: 12px solid white;
        }

        .btn-street {
            background: white;
            color: black;
            font-weight: 900;
            padding: 10px 25px;
            clip-path: polygon(10% 0, 100% 0, 90% 100%, 0% 100%);
            transition: all 0.3s;
        }

        .btn-street:hover {
            background: var(--street-yellow);
            transform: scale(1.05);
        }

        /* SCANNING LINE */
        .scan-line {
            height: 2px;
            background: var(--street-yellow);
            width: 0%;
            transition: width 1.5s ease;
            box-shadow: 0 0 10px var(--street-yellow);
        }
    </style>
</head>
<body class="flex flex-col items-center py-12 px-6">

    <div id="particles-js"></div>

    <div class="w-full max-w-lg">
        <div class="mb-12">
            <h1 class="street-title">MAHI<br>KA.</h1>
            <p class="mt-4 bg-white text-black font-bold inline-block px-2 py-1 text-xs">STREET LOGISTICS v.1.0</p>
        </div>

        <div class="flex flex-col gap-2 mb-8">
            <div class="flex gap-2">
                <input type="text" id="search-input" placeholder="INPUT DESTINATION..." class="bg-transparent border-2 border-white text-white p-3 w-full outline-none focus:border-[var(--street-yellow)]">
                <button onclick="runStreetSearch()" class="btn-street">GET</button>
            </div>
            <div id="scan-bar" class="scan-line"></div>
        </div>

        <div id="result-container" class="space-y-4"></div>
    </div>

    <div class="fixed bottom-6 inset-x-0 px-6 flex justify-between items-center max-w-lg mx-auto pointer-events-none">
        <button class="pointer-events-auto bg-black border-2 border-white p-4 text-white hover:bg-white hover:text-black transition">
            <i class="fa-solid fa-map-location-dot"></i>
        </button>
        <button class="pointer-events-auto bg-[var(--street-yellow)] border-2 border-black p-4 text-black font-bold">
            <i class="fa-solid fa-phone"></i> CALL
        </button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <script>
        // PARTICLES GAYA HUJAN JALANAN
        particlesJS("particles-js", {
            "particles": {
                "number": { "value": 150, "density": { "enable": true, "value_area": 800 } },
                "color": { "value": "#ffffff" },
                "shape": { "type": "edge" },
                "opacity": { "value": 0.2, "random": true },
                "size": { "value": 1, "random": true },
                "line_linked": { "enable": false },
                "move": {
                    "enable": true,
                    "speed": 10, // Cepat seperti hujan
                    "direction": "bottom", // Jatuh ke bawah
                    "random": false,
                    "straight": true,
                    "out_mode": "out"
                }
            },
            "interactivity": { "events": { "onhover": { "enable": false } } }
        });

        let allData = [];
        async function loadData() {
            try {
                const res = await fetch('https://script.google.com/macros/s/AKfycbwfulIjftKvtjSoovdF3iHt_GeOiRNiSg76FIi7KzmhreEHsQFYWS34Rbw9r-Q_IR2lvQ/exec');
                allData = await res.json();
            } catch(e) { console.log("Data offline"); }
        }

        function runStreetSearch() {
            const bar = document.getElementById('scan-bar');
            bar.style.width = '100%';
            setTimeout(() => {
                bar.style.width = '0%';
                executeSearch();
            }, 1000);
        }

        function executeSearch() {
            const key = document.getElementById('search-input').value.toLowerCase();
            const list = document.getElementById('result-container');
            list.innerHTML = '';
            
            const filtered = allData.filter(b => b.tujuan.toLowerCase().includes(key) || b.armada.toLowerCase().includes(key));
            
            if(filtered.length > 0) {
                filtered.forEach(b => {
                    list.innerHTML += `
                        <div class="street-card p-4 flex justify-between items-center">
                            <div>
                                <h3 class="font-bold text-white text-xl">${b.armada}</h3>
                                <p class="text-xs text-[var(--street-yellow)] uppercase tracking-widest">>> ${b.tujuan}</p>
                            </div>
                            <div class="text-right">
                                <span class="block text-xl font-bold italic">${b.jam}</span>
                                <span class="text-[10px] bg-white text-black px-1 font-bold">DEPARTING</span>
                            </div>
                        </div>`;
                });
            } else {
                list.innerHTML = `<p class="text-center opacity-40">-- ROUTE NOT FOUND --</p>`;
            }
        }

        loadData();
    </script>
</body>
</html>
